<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>易搜会员中心－我的易搜</title>
<link rel="stylesheet" href="__PUBLIC__/index/default/style/reset.css" />
<link rel="stylesheet" href="__PUBLIC__/member/user.css" />
<script type="text/javascript" src="__PUBLIC__/index/default/javascript/jquery.js"></script>
<script type="text/javascript" src="__PUBLIC__/index/default/javascript/user.js"></script>
<script type="text/javascript" src="__PUBLIC__/index/default/javascript/ks-switch.pack.js"></script>
<script type="text/javascript">
$(function($){
	$("#switchBox").switchTab({titCell: "dt a", trigger: "click", delayTime: 0});
});
</script>
<script type="text/javascript">
$(document).ready(function(){

	//初始提示
	$('#password').after('<span id="chkPass" class="msgdiv">留空为不更改登录密码</span>');
	$('#password1').after('<span id="chkRepass" class="msgdiv">请重复输入和上面相同的密码</span>');
	$('#password3').after('<span id="chkPass3" class="msgdiv">请输入登录密码</span>');
	$('#password4').after('<span id="chkPass4" class="msgdiv">密码由5-20个英文字母或数字组成</span>');
	$('#password5').after('<span id="chkRepass5" class="msgdiv">请重复输入和上面相同的密码</span>');
	
	$('#password').focus(function(){ 
		$('#chkPass').remove();
		$('#password').after('<span id="chkPass" class="msgdiv">登录密码由5-20个英文字母或数字组成</span>');
	}); 
	$('#memtishi').after('<span id="chkmemtishi" class="msgdiv">密码丢掉后可以找回的问题提示</span>');
	$('#memhueda').after('<span id="chkmemhueda" class="msgdiv">找回密码必须回答的答案</span>');


	$('#password').blur(function(){ 
		var p=$("#password")[0].value;
		var patrn=/^(\w){5,20}$/;
		if(p == ''){
			$('#chkPass').remove();
			$('#password').after('<span id="chkPass" class="msgdiv">留空为不更改登录密码</span>');
		}else if(!patrn.exec(p)){
			$('#chkPass').remove();
			$('#password').after('<span id="chkPass" class="errdiv">登录密码必须由5-20个英文字母或数字组成</span>');
		}else{
			$('#chkPass').remove();
			$('#password').after('<span id="chkPass" class="rightdiv">该登录密码可以使用</span>');
		}
	}); 

	$('#password1').focus(function(){ 
		$('#chkRepass').remove();
		$('#password1').after('<span id="chkRepass" class="msgdiv">请重复输入和上面相同的密码</span>');
	}); 

	$('#password1').blur(function(){ 
		var p=$("#password1")[0].value;
		var w=$("#password")[0].value;
		var patrn=/^(\w){5,20}$/;
		if( p == '' && w == ''){
			$('#chkRepass').remove();
			$('#password1').after('<span id="chkRepass" class="msgdiv">请重复输入和上面相同的密码</span>');
			}else if(!patrn.exec(p)){
			$('#chkRepass').remove();
			$('#password1').after('<span id="chkRepass" class="errdiv">登录密码必须由5-20个英文字母或数字组成</span>');
		}else if(p!=w){
			$('#chkRepass').remove();
			$('#password1').after('<span id="chkRepass" class="errdiv">两次输入的密码不一致，请输入和上面相同的密码</span>');
		}else{
			$('#chkRepass').remove();
			$('#password1').after('<span id="chkRepass" class="rightdiv">输入正确</span>');
		}
	}); 
	//问题提示
	$('#memtishi').focus(function(){ 
		$('#chkmemtishi').remove();
		$('#memtishi').after('<span id="chkmemtishi" class="msgdiv">密码丢失后可以找回的问题提示</span>');
	}); 

	$('#memtishi').blur(function(){
		var p=$("#memtishi")[0].value;
		if(p.length<2){
			$('#chkmemtishi').remove();
			$('#memtishi').after('<span id="chkmemtishi" class="errdiv">请输入问题提示</span>');
		}else{
			$('#chkmemtishi').remove();
			$('#memtishi').after('<span id="chkmemtishi" class="rightdiv">输入正确</span>');
		}

	}); 
//问题答案
	$('#memhueda').focus(function(){ 
		$('#chkmemhueda').remove();
		$('#memhueda').after('<span id="chkmemhueda" class="msgdiv">密码丢失后可以找回的问题提示</span>');
	}); 

	$('#memhueda').blur(function(){
		var p=$("#memhueda")[0].value;
		if(p.length<2){
			$('#chkmemhueda').remove();
			$('#memhueda').after('<span id="chkmemhueda" class="errdiv">请输入问题答案</span>');
		}else{
			$('#chkmemhueda').remove();
			$('#memhueda').after('<span id="chkmemhueda" class="rightdiv">输入正确</span>');
		}

		});
	$('#password3').focus(function(){ 
		$('#chkPass3').remove();
		$('#password3').after('<span id="chkPass3" class="msgdiv">请输入登录密码</span>');
	});
	$('#password3').blur(function(){ 
		var p=$("#password3")[0].value;
		if(p == ''){
			$('#chkPass3').remove();
			$('#password3').after('<span id="chkPass3" class="errdiv">登录密码不能为空</span>');
		}else{
			$('#chkPass3').remove();
			$('#password3').after('<span id="chkPass3" class="rightdiv">输入成功</span>');
		}
		});
	$('#password4').focus(function(){ 
		$('#chkPass4').remove();
		$('#password4').after('<span id="chkPass4" class="msgdiv">密码由5-20个英文字母或数字组成</span>');
	});
	$('#password4').blur(function(){ 
		var p=$("#password4")[0].value;
		var patrn=/^(\w){5,20}$/;
		if(!patrn.exec(p)){
			$('#chkPass4').remove();
			$('#password4').after('<span id="chkPass4" class="errdiv">密码必须由5-20个字母或数字组成</span>');
		}else{
			$('#chkPass4').remove();
			$('#password4').after('<span id="chkPass4" class="rightdiv">该登录密码可以使用</span>');
		}
		});
	$('#password5').focus(function(){ 
		$('#chkRepass5').remove();
		$('#password5').after('<span id="chkRepass5" class="msgdiv">请重复输入和上面相同的密码</span>');
	}); 

	$('#password5').blur(function(){ 
		var p=$("#password5")[0].value;
		var w=$("#password4")[0].value;
		var patrn=/^(\w){5,20}$/;
		if(!patrn.exec(p)){
			$('#chkRepass5').remove();
			$('#password5').after('<span id="chkRepass5" class="errdiv">密码必须由5-20个字母或数字组成</span>');
		}else if(p!=w){
			$('#chkRepass5').remove();
			$('#password5').after('<span id="chkRepass5" class="errdiv">两次输入不一致，请输入和上面相同的密码</span>');
		}else{
			$('#chkRepass5').remove();
			$('#password5').after('<span id="chkRepass5" class="rightdiv">输入正确</span>');
		}
	}); 
});	

function cheakform()
	{
	  	if(document.form1.password.value!=document.form1.password1.value)
		{	
			document.form1.password1.focus();
			document.form1.password1.blur();

		return false;
		}
		else if($('#chkPass')[0].className=='errdiv')
		{
		  document.form1.password.focus();
		  document.form1.password.blur();
		  return false;
		}
		else if($('#chkRepass')[0].className=='errdiv')
		{
		  document.form1.password1.focus();
		  document.form1.password1.blur();
		  return false;
		}
		else if(document.form1.memtishi.value=="")
		{
			document.form1.memtishi.focus();
			document.form1.memtishi.blur();		
		return false;
		}
		else if(document.form1.memhueda.value=="")
		{
			document.form1.memhueda.focus();
			document.form1.memhueda.blur();	
		return false;
		}
	return true;
	}

function checktrader(){
  if(document.form2.password3.value==""){
    document.form2.password3.focus();
    document.form2.password3.blur();		
    return false;
  }else if(document.form2.password5.value!=document.form2.password4.value){	
    document.form2.password5.focus();
    document.form2.password5.blur();
    return false;
  }else if(document.form2.password4.value==""){
    document.form2.password4.focus();
    document.form2.password4.blur();		
    return false;
  }else if(document.form2.password5.value==""){
    document.form2.password5.focus();
    document.form2.password5.blur();		
    return false;
  }else if($('#chkPass4')[0].className=='errdiv'){
    document.form1.password4.focus();
    document.form1.password4.blur();
    return false;
  }else if($('#chkRepass5')[0].className=='errdiv'){
    document.form1.password5.focus();
    document.form1.password5.blur();
    return false;
  }
}
</script>
</head>
<body id="body_user">
  <include file="Index:header" />
	<div id="user_m">
    	<div class="warp_900">
        	<div id="main">
		  <include file="Index:sidebar" />
                <div id="main_rlong">
                	<div class="main_rlong_tit">登录密码设置</div>
                   <div class="clear30"></div>
                    <!--tab切換內容 開始-->
                    <div class="main">
                        <dl class="switchBox" id="switchBox">
                            <!--nav start-->
                            <dt>
                                <a href="#">登录密码</a>
                                <a href="#">交易密码</a>
                            </dt>
                            <!--nav end-->
                            <dd>
                                <!--tab登录密码 start-->
                                <div class="main_con2">
                                    <form name="form1" id="form1" method="post" action="__ACTION__" onSubmit="return cheakform();">
                                    <div class="user_password" style="width:600px;">
                                        <p><div class="user_p1">新设密码：</div><div class="user_p2"><input name="password" id="password" value="" class="small" type="password"></div></p>
                                        <div class="clear"></div>
                                        <p><div class="user_p1">重复密码：</div><div class="user_p2"><input name="password1" id="password1" value="" class="small" type="password"></div></p>
                                        <div class="clear"></div>
					<p><div class="user_p1">密码提示问题：</div><div class="user_p2"><input name="memtishi" id="memtishi" class="small" type="text" value="<!--{$result.passwordquestion}--!>"></div></p>
                                        <div class="clear"></div>
                                        <p><div class="user_p1">密码提示答案：</div><div class="user_p2"><input name="memhueda" id="memhueda" class="small" type="text" value="<!--{$result.passwordanswer}--!>"></div></p>
                                        <div class="clear"></div>
                                    </div>
                                    <div class="main_button">
				      <input type="submit" value="修改密码" />
                                    </div>
                                    </form>
                                </div>
                                <div class="clear30"></div>  
                                <!--tab登录密码 end-->                      
                            </dd>
                            <dd>
                                <!--tab交易密码 start-->
                                <div class="main_con2">
                                    <form name="form2" id="form2" action="__ACTION__" method="post" onSubmit="return checktrader();">
                                    <div class="user_password" style="width:600px;">
				      <p><div class="user_p3">用户名：</div><div class="user_p2"><input name="username" id="username" value="<!--{$Think.session.name}--!>" class="small" type="text" readonly="readonly" disabled="true"><span class="msgdiv">用户名不可修改</span></div></p>
                                        <div class="clear"></div>
                                        <p><div class="user_p3">请输入登录密码：</div><div class="user_p2"><input name="password3" id="password3" value="" class="small" type="password"></div></p>
                                        <div class="clear"></div>
                                        <p><div class="user_p3">输入新交易密码：</div><div class="user_p2"><input name="password4" id="password4" value="" class="small" type="password"></div></p>
                                        <div class="clear"></div>
                                        <p><div class="user_p3">确认新交易密码：</div><div class="user_p2"><input name="password5" id="password5" value="" class="small" type="password"></div></p>
					<div class="clear"></div>
					<input type="hidden" name="mod" value="trader" />
                                    </div>
				</form>
				<div class="main_button">
                                        <button style="margin-right:10px;" onclick="$('#form2').submit()">修改</button><button onclck="location.href='__URL__/setsafe'">取消</button>
                                    </div>			      </div>
                                <div class="clear30"></div>  
                                <!--tab交易密码 end--> 
                            </dd>  
                        </dl>
                    </div>
                    <!--tab切換內容 結束-->
                    <div class="clear"></div>
                </div>
                <div class="clear"></div>
            </div>
        </div>
      </div>
      <include file="Index:footer" />
</body>
</html>
