<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>我要包月订购 - 网上购物 - 易搜会员中心</title>
<link rel="stylesheet" href="__PUBLIC__/index/default/style/reset.css" />
<link rel="stylesheet" href="__PUBLIC__/member/user.css" />
<script type="text/javascript" src="__PUBLIC__/index/default/javascript/jquery.js"></script>
<script type="text/javascript" src="__PUBLIC__/index/default/javascript/user.js"></script>
<script type="text/javascript">
$.fn.hradio = function(options){
        var self = this;
        return $(':radio+label',this).each(function(){
            $(this).addClass('byhyRadio');
            if($(this).prev().is("checked"))
                $(this).addClass('byhyRadio_Checked');
        }).click(function(event){
            $(this).siblings().removeClass("byhyRadio_Checked");
            if(!$(this).prev().is(':checked')){
				$(this).addClass("byhyRadio_Checked");
                $(this).prev()[0].checked = true;
            } 
	    event.stopPropagation();
	    showtype($(this).prev().val());

        })
        .prev().hide();
}

$.fn.hradio2 = function(options){
        var self = this;
        return $(':radio+label',this).each(function(){
            $(this).addClass('byhyRadio');
            if($(this).prev().is("checked"))
                $(this).addClass('byhyRadio_Checked');
        }).click(function(event){
            $(this).siblings().removeClass("byhyRadio_Checked");
            if(!$(this).prev().is(':checked')){
				$(this).addClass("byhyRadio_Checked");
                $(this).prev()[0].checked = true;
            } 
	    event.stopPropagation();
	    showarea();
        })
        .prev().hide();
	}

$.fn.hradio3 = function(options){
        var self = this;
        return $(':radio+label',this).each(function(){
            $(this).addClass('byhyRadio');
            if($(this).prev().is("checked"))
                $(this).addClass('byhyRadio_Checked');
        }).click(function(event){
            $(this).siblings().removeClass("byhyRadio_Checked");
            if(!$(this).prev().is(':checked')){
				$(this).addClass("byhyRadio_Checked");
                $(this).prev()[0].checked = true;
            } 
	    event.stopPropagation();
	    //radioShow($(this).prev().val(), $('input:radio[name="hydjradio"]:checked').val());
	    showmod();
        })
        .prev().hide();
	
	}

$.fn.hradio4 = function(options){
        var self = this;
        return $(':radio+label',this).each(function(){
            $(this).addClass('byhyRadio');
            if($(this).prev().is("checked"))
                $(this).addClass('byhyRadio_Checked');
        }).click(function(event){
            $(this).siblings().removeClass("byhyRadio_Checked");
            if(!$(this).prev().is(':checked')){
				$(this).addClass("byhyRadio_Checked");
                $(this).prev()[0].checked = true;
            } 
	    event.stopPropagation();
	    radioShow($(this).prev().val(), $('input:radio[name="type"]:checked').val(), $('input:radio[name="hydjradio"]:checked').val());
        })
        .prev().hide();	
	}

$(function(){
	$('#radiolist').hradio();
});

function showtype(){
  var type = '<input name="type" id="type1" type="radio" value="1"/><label for="type1" style="margin-left:20px;">&nbsp;&nbsp;&nbsp;&nbsp;全国包月&nbsp;&nbsp;&nbsp;&nbsp;</label><input name="type" id="type2" type="radio" value="2"/><label for="type2" style="margin-left:20px;">&nbsp;&nbsp;&nbsp;&nbsp;省级包月&nbsp;&nbsp;&nbsp;&nbsp;</label>';
  $('#b').html('<div id="radiolist3" class="div_hydj"><h1 style="display:inline;">选择包月类型</h1>'+type+'<div class="clear"></div></div></ul><script>$("#radiolist3").hradio3();<\/script>');
  $('#c').empty();
  $('#d').empty();
  $('#b2').empty();
}

function showmod(){
  var mod = '<input name="mod" id="mod1" type="radio" value="1"/><label for="mod1" style="margin-left:20px;">&nbsp;&nbsp;&nbsp;&nbsp;日流量包&nbsp;&nbsp;&nbsp;&nbsp;</label><input name="mod" id="mod2" type="radio" value="2"/><label for="mod2" style="margin-left:20px;">&nbsp;&nbsp;&nbsp;&nbsp;月流量包&nbsp;&nbsp;&nbsp;&nbsp;</label>';
  $('#b2').html('<div id="radiolist4" class="div_hydj"><h1 style="display:inline;">选择包月模式</h1>'+mod+'<div class="clear"></div></div></ul><script>$("#radiolist4").hradio4();<\/script>');
}

function radioShow(mid, tid, lid){
  $.ajax({
      url: '__ROOT__/member.php/public/getmonthlymoney/lid/' + lid + '/tid/' + tid + '/mid/' + mid,
      success: function(ress){
      $('#d').empty();
      var moneystr = '';
      $.each(ress, function(i,json){
	moneystr += '<input name="bysjradio" id="bysjr'+i+'" type="radio" value="'+json.id+'"/><label for="bysjr'+i+'" class="bysjradio">包月数：'+json.months+'个月<br />市场价：'+json.marketprice+'元<br />推广价：'+json.promotionprice+'元</label>';
	});

        //查看电话
        if(ress[0].author_one == 1){
	  var author_one = 'check_yes';
	}else{
	  var author_one = 'check_no';
	}
	//查看手机
        if(ress[0].author_two == 1){
	  var author_two = 'check_yes';
	}else{
	  var author_two = 'check_no';
	}
	//查看手机
        if(ress[0].author_three == 1){
	  var author_three = 'check_yes';
	}else{
	  var author_three = 'check_no';
	}
	//查看邮件
        if(ress[0].author_four == 1){
	  var author_four = 'check_yes';
	}else{
	  var author_four = 'check_no';
	}
	//查看网址
        if(ress[0].author_five == 1){
	  var author_five = 'check_yes';
	}else{
	  var author_five = 'check_no';
	}
	//单条复制
        if(ress[0].author_six == 1){
	  var author_six = 'check_yes';
	}else{
	  var author_six = 'check_no';
	}
	//批量复制
        if(ress[0].author_ten == 1){
	  var author_ten = 'check_yes';
	}else{
	  var author_ten = 'check_no';
	}
	//单个下载
        if(ress[0].author_seven == 1){
	  var author_seven = 'check_yes';
	}else{
	  var author_seven = 'check_no';
	}
	//批量下载
        if(ress[0].author_eight == 1){
	  var author_eight = 'check_yes';
	}else{
	  var author_eight = 'check_no';
	}
	//全部下载
        if(ress[0].author_nine == 1){
	  var author_nine = 'check_yes';
	}else{
	  var author_nine = 'check_no';
	}
	//每天复制数量
	if(author_six == 'check_no' && author_ten == 'check_no'){
	  var everydaycopy = '每天可免费复制的最多条数：---条/天';
	}else{
	  var everydaycopy = '每天可免费复制的最多条数：'+ress[0].monthly_two_num+'条/天';
	}
	//每天下载数量
	if(author_seven == 'check_no' && author_eight == 'check_no' && author_nine == 'check_no'){
	  var everydaydown = '每天可免费下载的最多条数：---条/天';
	}else{
	  var everydaydown = '每天可免费下载的最多条数：'+ress[0].monthly_three_num+'条/天';
	}
	$('#c').html('<ul class="c1"><div class="div_hydj"><h1>包月会员权限</h1><div class="div_byhyxx"><li><span class="'+author_one+'">查看电话</span><span class="'+author_two+'">查看手机</span><span class="'+author_three+'">查看QQ</span><span class="'+author_four+'">查看邮件</span><span class="'+author_five+'">查看网址</span>·····每天可免费查看的最多条数：'+ress[0].monthly_one_num+'条/天</li><div class="clear"></div><li><span class="'+author_six+'">单条复制</span><span class="'+author_ten+'">批量复制</span>····················' + everydaycopy + '</li><div class="clear"></div><li><span class="'+author_seven+'">单个下载</span><span class="'+author_eight+'">批量下载</span><span class="'+author_nine+'">全部下载</span>···············' + everydaydown + '</li><div class="clear"></div></div></div><div class="clear10"></div><div id="radiolist2" class="div_hydj"><h1>选择包月时间</h1>'+moneystr+'<div class="clear"></div></div></ul><script>$("#radiolist2").hradio2();<\/script>');
      },
      dataType:'json'
});
}

function showarea(){
  $.ajax({
      url: '__ROOT__/member.php/public/ajaxgetcsid2',
      success: function(ress){
      if($('input:radio[name="type"]:checked').val() == 2){
      var moneystr = '';
      $.each(ress, function(i,json){
	moneystr += '<input name="csidcheck" id="csidcheck'+i+'" type="checkbox" value="'+json.id+'"/><label for="csidcheck'+i+'">' + json.name + '</label>';
	});
      $('#d').html('<div id="radiolist5" class="div_hydj"><h1>选择省份</h1>'+moneystr+'<div class="clear"></div></div>');
      }
      },
      dataType:'json'
});
}
</script>
<script>
  var tosubmit = function(){
    var selectid = $('input[name="bysjradio"]:checked').val();
    var area_str = '';
    $("input[name='csidcheck']:checkbox").each(function(){ 
	if($(this).attr("checked")){
	if(!area_str){
	area_str += $(this).val();
	}else{
	area_str += ',' + $(this).val();
	}
	}
	});
    
    if(selectid){
      location.href = "__URL__/monthly_pay/mid/" + selectid + '/area_str/' + area_str;
    }
    
  }
</script>
</head>
<body id="body_user">
  <include file="Index:header" />
	<div id="user_m">
    	<div class="warp_900">
        	<div id="main">
		  <include file="Services:sidebar" />
                <div id="main_rlong">
                	<div class="main_rlong_tit"><input type="button" value="返回" onclick="history.go(-1);" style="float:right;margin-right:5px;font-size:12px;" />易搜会员包月</div>
                   <div class="clear30"></div>
                    <!--tab切換內容 開始-->
                    <div class="main">
                        <dl class="singleBox">
                            <!--nav start-->
                            <dt>
                                <a href="#" class="on">我要包月订购</a>
				<a class="textlink" href="__APP__/shop/mymonthlyorder">我的包月订单</a>
                            </dt>
                            <!--nav end-->
                            <dd>
                                <!--tab我要包月订购 start-->
                                <div class="main_baoyue">
                                    <div id="radiolist" class="div_hydj">
				      <h1>选择会员等级</h1>
				      <volist name="result" id="r">
				      <input name="hydjradio" id="hydjr<!--{$r.id}--!>" type="radio" value="<!--{$r.id}--!>" /><label for="hydjr<!--{$r.id}--!>" class="byradio"><!--{$r.name}--!></label> 
				      </volist>
				      <div class="clear"></div>
				      
                                    </div>
                                    <div class="clear"></div>
				    <div id="b">
                                        
				    </div>
				    <div id="b2">
                                        
				    </div>
                                    <div id="c">
                                        
				    </div>
				    <div id="d">
                                        
				    </div>
				  </div>
				  <div class="clear30"></div>  
                                <!--tab我要包月订购 end-->                      
                            </dd>
                        </dl>
		      </div>
<div class="editbtn">
  <input type="button" onclick="tosubmit();" class="rmb_fanhui" value="提交" />
  <input type="button" style="margin-left:20px;" onclick="location.href='__URL__';" class="rmb_fanhui" value="取消" />
                                         </div>
		      
		      
                    <!--tab切換內容 結束-->
                    <div class="clear"></div>
                </div>
                <div class="clear"></div>
            </div>
        </div>
    </div>
    <include file="Index:footer" />
</body>
</html>
